{% extends "base.html" %}

{% block title %}File Comparison{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
{% endblock %}

{% block content %}
<div class="wrapper">
    <!-- 왼쪽 네비게이션 바 -->
    <nav class="sidebar">
        <ul class="nav-icons">
            <li><a href="#" id="toggleSidebarBtn"><i class="fas fa-folder-open"></i></a></li>
            <li><a href="#"><i class="fas fa-search"></i></a></li>
            <li><a href="#" id="branchToggleBtn"><i class="fas fa-code-branch"></i></a></li> <!-- 브랜치 토글 버튼 -->
            <li><a href="#"><i class="fas fa-cog"></i></a></li>
        </ul>
    </nav>

    <!-- 사이드 콘텐츠를 위한 모달 창 -->
    <div id="sideContentModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <input type="text" id="commitMessage" placeholder="Enter commit message">
            <div id="result-message" class="result-message"></div>
            <button id="commit-button" class="action-btn">Commit</button>
            <span id="file1-name" class="file-name"></span>
            <div class="results">
                <div class="column content-column">
                    <div class="title-section">
                        <h3>Commit File</h3>
                    </div>
                    <div class="upload-section">
                        <input type="file" webkitdirectory directory name="file1" id="file1" class="file-input" style="display: none;" required>
                        <button type="button" class="open-file-btn" onclick="document.getElementById('file1').click();">Upload File</button>
                    </div>
                </div>
            </div>

            <!-- 변경 파일 내용 섹션 추가 -->
            <div class="column content-column">
                <div class="title-section">
                    <h3>My File</h3>
                </div>
                <div class="upload-section">
                    <input type="file" name="file2" id="file2" class="file-input" style="display: none;" required>
                    <button type="button" class="open-file-btn" onclick="document.getElementById('file2').click();">Open File</button>
                    <span id="file2-name" class="file-name"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="branchContent" class="branch-modal">
        <span class="close-btn">&times;</span>
        <div class="menu-trigger"></div>
        <section class="cards-wrapper">
            <div class="cards-container">
                <!-- 동적으로 카드가 추가될 영역 -->
            </div>
        </section>

        <!-- 메타데이터 카드 슬라이드 -->
        <section class="metadata-cards-wrapper">
            <div class="metadata-cards-container">
                <!-- 메타데이터 카드가 추가될 영역 -->
            </div>
        </section>
    </div>

    <!-- 기존 컨텐츠 -->
    <div class="main-content">
        <div id="content">
            <div class="menu-trigger"></div>
            <section class="cards-wrapper">
                <div class="cards-container">
                    <!-- 동적으로 카드가 추가될 영역 -->
                </div>
            </section>

            <!-- 메타데이터 카드 슬라이드 -->
            <section class="metadata-cards-wrapper" style="display: block;">
                <!-- 초기에는 숨김 -->
                <div class="metadata-cards-container">
                    <!-- 메타데이터 카드가 추가될 영역 -->
                </div>
            </section>
            <div class="commit-and-content-container">
                <div class="commit-cards-container">
                    <!-- 커밋 카드가 추가될 영역 -->
                </div>
                <!-- 파일 내용 표시 영역 -->
                <div id="file-content-display">
                    <!-- 파일 내용이 여기 표시됩니다. -->
                </div>
                <div class="file-content" id="changed-file-content">
                    <!-- Changed file content will be displayed here -->
                </div>
            </div>
        </div>

        <div class="compare-section">
            <button id="compare-btn" class="action-btn">코드 차이점</button>
            <div class="comparison-result" id="comparison-result">
                <!-- Differences will be displayed here -->
            </div>
            <button id="review-btn" class="action-btn">AI 코드 리뷰</button>
            <div id="review-result">
                <!-- Review feedback will be displayed here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}
